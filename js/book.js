"use strict";const JSON_URL="data/books.json";window.onload=function(){BookUtil.renderArea=$(`#pagecontent`),ExcludeUtil.pInitialise(),DataUtil.loadJSON(JSON_URL).then(onJsonLoad)};let books=[],bkI=0;function onJsonLoad(a){$("ul.contents").append($(`<li><a href='books.html' class="lst--border"><span class='name'>\u21FD All Books</span></a></li>`)),BookUtil.baseDataUrl="data/book/book-",BookUtil.homebrewIndex="book",BookUtil.homebrewData="bookData",BookUtil.initLinkGrabbers(),BookUtil.initScrollTopFloat(),BookUtil.contentType="book",addBooks(a),$(`.book-head-message`).text(`Select a book from the list on the left`),$(`.book-loading-message`).text(`Select a book to begin`),window.onhashchange=BookUtil.booksHashChange,BrewUtil.pAddBrewData().then(handleBrew).then(()=>BrewUtil.pAddLocalBrewData()).then(()=>{window.location.hash.length?BookUtil.booksHashChange():$(`.contents-item`).show(),window.dispatchEvent(new Event("toolsLoaded"))})}function handleBrew(a){return addBooks(a),BookUtil.addHeaderHandles(!0),Promise.resolve()}function addBooks(a){if(!a.book||!a.book.length)return;books.push(...a.book),BookUtil.bookIndex=books;const b=$("ul.contents");let c="";for(;bkI<books.length;bkI++){const a=books[bkI];c+=BookUtil.getContentsItem(bkI,a,{book:a,addOnclick:!0,defaultHeadersHidden:!0})}b.append(c)}