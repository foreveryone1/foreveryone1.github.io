"use strict";const CONTENTS_URL="data/adventures.json";window.onload=function(){BookUtil.renderArea=$(`#pagecontent`),ExcludeUtil.pInitialise(),DataUtil.loadJSON(CONTENTS_URL).then(onJsonLoad)};let adventures=[],adI=0;function onJsonLoad(a){$("ul.contents").append($(`<li><a href='adventures.html' class="lst--border"><span class='name'>\u21FD All Adventures</span></a></li>`)),BookUtil.baseDataUrl="data/adventure/adventure-",BookUtil.homebrewIndex="adventure",BookUtil.homebrewData="adventureData",BookUtil.initLinkGrabbers(),BookUtil.initScrollTopFloat(),BookUtil.contentType="adventure",addAdventures(a),$(`.book-head-message`).text(`Select an adventure from the list on the left`),$(`.book-loading-message`).text(`Select an adventure to begin`),window.onhashchange=BookUtil.booksHashChange,BrewUtil.pAddBrewData().then(handleBrew).then(()=>BrewUtil.pAddLocalBrewData()).then(()=>{window.location.hash.length?BookUtil.booksHashChange():$(`.contents-item`).show(),window.dispatchEvent(new Event("toolsLoaded"))})}function handleBrew(a){return addAdventures(a),BookUtil.addHeaderHandles(!0),Promise.resolve()}function addAdventures(a){if(!a.adventure||!a.adventure.length)return;adventures.push(...a.adventure),BookUtil.bookIndex=adventures;const b=$("ul.contents");let c="";for(;adI<adventures.length;adI++){const a=adventures[adI];c+=BookUtil.getContentsItem(adI,a,{book:a,addOnclick:!0,defaultHeadersHidden:!0})}b.append(c)}